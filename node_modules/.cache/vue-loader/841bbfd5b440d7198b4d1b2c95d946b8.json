{"remainingRequest":"D:\\Albion Tech\\LabSys\\Experiment-Teaching-System\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Albion Tech\\LabSys\\Experiment-Teaching-System\\Frontend\\src\\components\\admin\\CourseManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Albion Tech\\LabSys\\Experiment-Teaching-System\\Frontend\\src\\components\\admin\\CourseManage.vue","mtime":1639412053776},{"path":"D:\\Albion Tech\\LabSys\\Experiment-Teaching-System\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Albion Tech\\LabSys\\Experiment-Teaching-System\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Albion Tech\\LabSys\\Experiment-Teaching-System\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Albion Tech\\LabSys\\Experiment-Teaching-System\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ3JlYXRlQ291cnNlIGZyb20gIkAvY29tcG9uZW50cy9hZG1pbi9DcmVhdGVDb3Vyc2UiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiQ291cnNlTWFuYWdlIiwNCiAgY29tcG9uZW50czoge0NyZWF0ZUNvdXJzZX0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBjb3Vyc2VzOiBbXSwNCiAgICAgIHRvdGFsOiAwLA0KDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsDQogICAgICBzZWxlY3RlZFVzZXI6IFtdLA0KICAgICAgc2VsZWN0ZWRSb2xlc0lkczogW10NCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgdGFibGVIZWlnaHQgKCkgew0KICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIDMyMA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldENvdXJzZXMoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0Q291cnNlcyAoKSB7DQogICAgICBsZXQgX3RoaXMgPSB0aGlzDQogICAgICB0aGlzLiRheGlvcy5nZXQoJy9jb3Vyc2VzL2FsbCcpLnRoZW4ocmVzcCA9PiB7DQogICAgICAgIGlmIChyZXNwICYmIHJlc3AuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICBfdGhpcy5jb3Vyc2VzID0gcmVzcC5kYXRhLm9iamVjdA0KICAgICAgICAgIF90aGlzLnRvdGFsID0gX3RoaXMuY291cnNlcy5sZW5ndGgNCiAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5jb3Vyc2VzKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZWRpdFVzZXIgKHVzZXIpIHsNCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlDQogICAgICB0aGlzLnNlbGVjdGVkVXNlciA9IHVzZXINCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZW50ZXJDb3Vyc2UnLHVzZXIuY291cnNlTmFtZSkNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYWRtaW5pbmRleC9jb3Vyc2UvJyt1c2VyLmlkKQ0KICAgICAgLy8gY29uc3Qgcm9sZUlkcyA9IFtdDQogICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHVzZXIucm9sZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgIC8vICAgcm9sZUlkcy5wdXNoKHVzZXIucm9sZXNbaV0uaWQpDQogICAgICAvLyB9DQogICAgICAvLyB0aGlzLnNlbGVjdGVkUm9sZXNJZHMgPSByb2xlSWRzDQogICAgfSwNCiAgICBkZWxldGVVc2VyKHVzZXIpew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrpropoHlhbPpl63or6Xor77nqIvlkJfvvJ/mraTmk43kvZzkuI3lj6/pgIYnLCfmj5DnpLonLHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKCgpPT57DQogICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9jb3Vyc2VzL2RlbGV0ZWNvdXJzZT9jb3Vyc2VJZD0nK3VzZXIuaWQpLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgaWYgKHJlc3AgJiYgcmVzcC5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy4kYWxlcnQoJ+ivvueoiyBbJyArIHVzZXIuY291cnNlTmFtZSArICddIOW3suWFs+mXre+8gScpDQogICAgICAgICAgICAvLyDkv67mlLnop5LoibLlkI7ph43mlrDor7fmsYLnlKjmiLfkv6Hmga/vvIzlrp7njrDop4blm77mm7TmlrANCiAgICAgICAgICAgIHRoaXMuZ2V0Q291cnNlcygpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJGFsZXJ0KHJlc3AuZGF0YS5tc2cpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICB9DQp9DQo="},{"version":3,"sources":["CourseManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CourseManage.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n  <div>\r\n    <el-card style=\"margin: 18px 2%;width: 95%\">\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <create-course @onSubmit=\"getCourses()\"></create-course>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-input placeholder=\"请输入内容\" >\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" ></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <!-- <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addOrderVisible = true\">添加订单</el-button>\r\n        </el-col> -->\r\n      </el-row>\r\n      <br/>\r\n\r\n      <el-table :data=\"courses\" stripe :min-height=\"tableHeight\">\r\n        <el-table-column\r\n          type=\"selection\"\r\n          width=\"55\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          type=\"index\"\r\n          label=\"序号\"\r\n          sortable\r\n          width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column label=\"课程编号\" prop=\"id\" fit></el-table-column>\r\n        <el-table-column label=\"课程名称\" prop=\"courseName\" fit></el-table-column>\r\n        <el-table-column\r\n          label=\"操作\"\r\n          width=\"120\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              @click=\"editUser(scope.row)\"\r\n              type=\"text\"\r\n              size=\"small\">\r\n              编辑\r\n            </el-button>\r\n            <el-button\r\n              @click=\"deleteUser(scope.row)\"\r\n              type=\"text\"\r\n              size=\"small\">\r\n              关闭\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <span class=\"divcss5\">总条数: {{total}}</span>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CreateCourse from \"@/components/admin/CreateCourse\";\r\nexport default {\r\n  name: \"CourseManage\",\r\n  components: {CreateCourse},\r\n  data () {\r\n    return {\r\n      courses: [],\r\n      total: 0,\r\n\r\n      dialogFormVisible: false,\r\n      selectedUser: [],\r\n      selectedRolesIds: []\r\n    }\r\n  },\r\n  computed: {\r\n    tableHeight () {\r\n      return window.innerHeight - 320\r\n    }\r\n  },\r\n  created() {\r\n    this.getCourses()\r\n  },\r\n  methods: {\r\n    getCourses () {\r\n      let _this = this\r\n      this.$axios.get('/courses/all').then(resp => {\r\n        if (resp && resp.data.code === 200) {\r\n          _this.courses = resp.data.object\r\n          _this.total = _this.courses.length\r\n          console.log(_this.courses)\r\n        }\r\n      })\r\n    },\r\n    editUser (user) {\r\n      this.dialogFormVisible = true\r\n      this.selectedUser = user\r\n      this.$store.commit('enterCourse',user.courseName)\r\n      this.$router.push('/adminindex/course/'+user.id)\r\n      // const roleIds = []\r\n      // for (let i = 0; i < user.roles.length; i++) {\r\n      //   roleIds.push(user.roles[i].id)\r\n      // }\r\n      // this.selectedRolesIds = roleIds\r\n    },\r\n    deleteUser(user){\r\n      const _this = this\r\n      this.$confirm('确定要关闭该课程吗？此操作不可逆','提示',{\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(()=>{\r\n        this.$axios.post('/courses/deletecourse?courseId='+user.id).then(resp => {\r\n          if (resp && resp.data.code === 200) {\r\n            this.$alert('课程 [' + user.courseName + '] 已关闭！')\r\n            // 修改角色后重新请求用户信息，实现视图更新\r\n            this.getCourses()\r\n          } else {\r\n            this.$alert(resp.data.msg)\r\n          }\r\n        })\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}